<div th:fragment="behavioralSection" xmlns:th="http://www.thymeleaf.org">

    <div class="border rounded p-3 mb-1">
        <!-- Profession -->
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <label id="inputProfessionLabel" for="inputProfession" class="form-label mb-0 fw-bold">Profession</label>
        </div>
        <input type="text" class="form-control" id="inputProfession" placeholder="e.g. Software Engineer">
        <br>

        <!-- Category -->
        <div class="mb-4">
            <label for="categorySelect" class="form-label fw-bold">Category (optional)</label>
            <div class="d-flex align-items-center gap-2">
                <select id="categorySelect" class="form-select w-auto">
                    <option value="" selected disabled>Select category</option>
                    <!-- Dynamically loaded with JS -->
                </select>
                <button id="categoryInfoBtn" class="btn btn-outline-info btn-sm" disabled>
                    <i class="bi bi-info-circle"></i> Info
                </button>
            </div>
        </div>

        <!-- Difficulty -->
        <div class="mb-4">
            <label for="difficultySelect" class="form-label fw-bold">Difficulty (optional)</label>
            <div class="d-flex align-items-center gap-2">
                <select id="difficultySelect" class="form-select w-auto">
                    <option value="" selected disabled>Select difficulty</option>
                    <!-- Dynamically loaded with JS -->
                </select>
                <button id="difficultyInfoBtn" class="btn btn-outline-info btn-sm" disabled>
                    <i class="bi bi-info-circle"></i> Info
                </button>
            </div>
        </div>

        <!-- Generate AI Question -->
        <button id="generateQuestionBtn"
                class="btn btn-primary mb-3 d-flex align-items-center justify-content-center"
                title="AI generates a Question">
            Generate Question&nbsp;
            <img th:src="@{/img/button/ai-stars.png}" alt="AI Icon"
                 style="width: 20px; height: 20px; margin-right: 8px;">
        </button>
        <hr>

        <!-- Saved Questions -->
        <div class="mb-4">
            <label for="savedQuestionSelect" class="form-label fw-bold">Saved questions</label>
            <div class="input-group mb-2">
                <select id="savedQuestionSelect" class="form-select">
                    <option value="" selected disabled>Select saved question</option>
                    <!-- Loaded dynamically -->
                </select>
                <button id="deleteQuestionBtn" class="btn btn-danger btn-sm ms-2 d-none">Delete Selected</button>
            </div>
            <hr class="mt-0">
        </div>

        <!-- Question -->
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <label for="inputQuestion" class="form-label mb-0 fw-bold">Question</label>
            <button id="commonQuestionsBtn" type="button" class="btn btn-outline-info btn-sm"
                    data-bs-toggle="modal"
                    data-bs-target="#commonQuestionsModal">
                <i class="bi bi-info-circle"></i> Common Questions
            </button>
        </div>
        <textarea class="form-control" id="inputQuestion" rows="3"
                  placeholder="e.g. Tell me about a time you faced a challenge at work."></textarea>

        <!-- Buttons section -->
        <div id="buttonsSection" class="input-group mb-3">
            <button type="button" class="btn btn-info mb-3 d-flex align-items-center justify-content-center"
                    data-bs-toggle="modal" data-bs-target="#infoModal">Info
            </button>
            <button id="saveQuestionBtn"
                    class="btn btn-secondary mb-3 d-flex align-items-center justify-content-center d-none">Save Question
            </button>
            <button id="resetBtn"
                    class="btn btn-warning mb-3 d-flex align-items-center justify-content-center"
                    title="Reset the question">
                Reset
            </button>
            <button id="readyBtn"
                    class="btn btn-success mb-3 d-flex align-items-center justify-content-center"
                    title="Click me when you are ready to answer the question">
                Ready!
            </button>
        </div>
    </div>

    <!-- Loading GIF -->
    <div id="loading" class="mb-4 text-center hidden">
        <img th:src="@{img/loading.gif}" alt="Loading..." style="width: 50px; height: 50px;">
    </div>

    <!-- Modals -->
    <!-- Info -->
    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">Info</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Enter a <strong>profession</strong> to get a question related to that field. If you leave it blank,
                    the
                    default will be
                    Software Engineer.
                    <br><br>
                    Click <strong>“Generate Question”</strong> to receive a question based on your profession, or enter
                    your
                    own custom question. If you leave it blank, a question will be generated automatically.
                    <br><br>
                    Click <strong>“Ready!”</strong> when you are ready to answer the question.
                    <br><br>
                    Click <strong>“Reset”</strong> to clear the question. The profession field must be cleared manually.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Got it!</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Info for Questions -->
    <div class="modal fade" id="infoQuestionModal" tabindex="-1" aria-labelledby="infoQuestionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-3 shadow">
                <div class="modal-header bg-light">
                    <h5 class="modal-title" id="infoQuestionModalLabel">Info</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="infoQuestionDescription"></p>
                    <hr>
                    <p><strong>Example:</strong></p>
                    <p id="infoQuestionExample" class="fst-italic"></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Common Questions -->
    <div class="modal fade" id="commonQuestionsModal" tabindex="-1" aria-labelledby="commonQuestionsLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="commonQuestionsLabel">Common Behavioral Interview Questions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-muted small mb-0">Select a question to add it</p>
                    <ul class="list-group">
                        <li class="list-group-item">1. Tell me about a time you faced a challenge at work.</li>
                        <li class="list-group-item">2. Describe a situation where you had to work under pressure.</li>
                        <li class="list-group-item">3. Give an example of a time you showed leadership.</li>
                        <li class="list-group-item">4. Tell me about a mistake you made and what you learned from it.
                        </li>
                        <li class="list-group-item">5. Describe a time you had a conflict with a coworker and how you
                            resolved it.
                        </li>
                        <li class="list-group-item">6. Give an example of when you went above and beyond your
                            responsibilities.
                        </li>
                        <li class="list-group-item">7. Tell me about a time you had to learn something quickly.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modals -->

    <script th:src="@{/js/behavioral.js}" type="module"></script>
    <script th:src="@{/js/main.js}" type="module"></script>
    <script type="module">
        import {setupSettings} from '/js/behavioral.js';
        import {checkSystemRequirements} from '/js/system-requirements.js';

        document.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('inputProfession')) {
                setupSettings();
                checkSystemRequirements();
            }
        });
    </script>

</div>
